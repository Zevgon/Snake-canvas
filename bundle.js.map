{"version":3,"sources":["webpack:///webpack/bootstrap d880da4abb7636002b53","webpack:///./game.js","webpack:///./constants.js","webpack:///./entry.js","webpack:///./snake.js"],"names":["Game","rows","columns","canvas","document","getElementById","width","parseInt","$","css","height","widthRatio","heightRatio","grid","getContext","scale","reset","startEventListner","snake","getStartingCoord","fillSquare","head","direction","dir","includes","addEventListener","e","which","validDirection","x","y","coord","interval","setInterval","move","bind","type","color","fillStyle","fillRect","coordToCanvas","pos","set","has","toString","queue","forEach","tail","validPos","clearInterval","clearSnake","COLOR_MAP","KEY_TO_DIR","VALID_DIRS","game","window","on","start","Snake","coords","Set","add","removeTail","newHead","getNewHead","unshift","pop","delete"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;AChEA;;;;AACA;;;;;;;;IAMqBA,I;AACnB,gBAAYC,IAAZ,EAAkBC,OAAlB,EAA2B;AAAA;;AACzB,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,QAAMC,SAASC,SAASC,cAAT,CAAwB,QAAxB,CAAf;AACA,QAAMC,QAAQC,SAASC,EAAEL,MAAF,EAAUM,GAAV,CAAc,OAAd,CAAT,CAAd;AACA,QAAMC,SAASH,SAASC,EAAEL,MAAF,EAAUM,GAAV,CAAc,QAAd,CAAT,CAAf;AACA,SAAKE,UAAL,GAAkBJ,SAASD,QAAQJ,OAAjB,CAAlB;AACA,SAAKU,WAAL,GAAmBL,SAASG,SAAST,IAAlB,CAAnB;AACA,SAAKY,IAAL,GAAYV,OAAOW,UAAP,CAAkB,IAAlB,CAAZ;AACA,SAAKD,IAAL,CAAUE,KAAV,CAAgB,KAAKJ,UAArB,EAAiC,KAAKC,WAAtC;AACA,SAAKI,KAAL;AACA,SAAKC,iBAAL;AACD;;;;4BAEO;AACN,WAAKC,KAAL,GAAa,oBAAU,CAAC,KAAKC,gBAAL,EAAD,CAAV,CAAb;AACA,WAAKC,UAAL,CAAgB,KAAKF,KAAL,CAAWG,IAAX,EAAhB,EAAmC,OAAnC;AACA,WAAKC,SAAL,GAAiB,GAAjB;AACD;;;mCAEcC,G,EAAK;AAClB,aAAO,sBAAW,KAAKD,SAAhB,EAA2BE,QAA3B,CAAoCD,GAApC,CAAP;AACD;;;wCAEmB;AAAA;;AAClBnB,eAASqB,gBAAT,CAA0B,SAA1B,EAAqC,aAAK;AACxC,YAAMF,MAAM,sBAAWG,EAAEC,KAAb,CAAZ;AACA,YAAI,MAAKC,cAAL,CAAoBL,GAApB,CAAJ,EAA8B;AAC5B,gBAAKD,SAAL,GAAiBC,GAAjB;AACD;AACF,OALD;AAMD;;;uCAEkB;AACjB,UAAMM,IAAItB,SAAS,KAAKL,OAAL,GAAe,CAAxB,CAAV;AACA,UAAM4B,IAAI,KAAK7B,IAAL,GAAY,CAAtB;AACA,aAAO,CAAC4B,CAAD,EAAIC,CAAJ,CAAP;AACD;;;kCAEaC,K,EAAO;AACnB,aAAO,CAACA,MAAM,CAAN,CAAD,EAAWA,MAAM,CAAN,CAAX,EAAqB,CAArB,EAAwB,CAAxB,CAAP;AACD;;;4BAEO;AACN,WAAKC,QAAL,GAAgBC,YAAY,KAAKC,IAAL,CAAUC,IAAV,CAAe,IAAf,CAAZ,EAAkC,GAAlC,CAAhB;AACD;;;+BAEUJ,K,EAAOK,I,EAAM;AAAA;;AACtB,UAAMC,QAAQ,qBAAUD,IAAV,CAAd;AACA,UAAI,CAACC,KAAL,EAAY;AACV,cAAM,gBAAN;AACD;AACD,WAAKxB,IAAL,CAAUyB,SAAV,GAAsBD,KAAtB;AACA,oBAAKxB,IAAL,EAAU0B,QAAV,iCAAsB,KAAKC,aAAL,CAAmBT,KAAnB,CAAtB;AACD;;;6BAEQU,G,EAAK;AACZ,UAAI,KAAKvB,KAAL,CAAWwB,GAAX,CAAeC,GAAf,CAAmBF,IAAIG,QAAJ,EAAnB,KACAH,IAAIG,QAAJ,OAAmB,KAAK1B,KAAL,CAAWG,IAAX,GAAkBuB,QAAlB,EADvB,EACqD;AACnD,eAAO,KAAP;AACD;AACD,UAAIH,IAAI,CAAJ,IAAS,CAAT,IAAcA,IAAI,CAAJ,KAAU,KAAKvC,OAA7B,IAAwCuC,IAAI,CAAJ,IAAS,CAAjD,IAAsDA,IAAI,CAAJ,KAAU,KAAKxC,IAAzE,EAA+E;AAC7E,eAAO,KAAP;AACD;AACD,aAAO,IAAP;AACD;;;iCAEY;AAAA;;AACX,WAAKiB,KAAL,CAAW2B,KAAX,CAAiBC,OAAjB,CAAyB,iBAAS;AAChC,eAAK1B,UAAL,CAAgBW,KAAhB,EAAuB,OAAvB;AACD,OAFD;AAGD;;;2BAEM;AACL,UAAMgB,OAAO,KAAK7B,KAAL,CAAWgB,IAAX,CAAgB,KAAKZ,SAArB,CAAb;AACA,UAAIyB,IAAJ,EAAU;AACR,aAAK3B,UAAL,CAAgB2B,IAAhB,EAAsB,OAAtB;AACD;AACD,UAAI,KAAKC,QAAL,CAAc,KAAK9B,KAAL,CAAWG,IAAX,EAAd,CAAJ,EAAsC;AACpC,aAAKD,UAAL,CAAgB,KAAKF,KAAL,CAAWG,IAAX,EAAhB,EAAmC,OAAnC;AACD,OAFD,MAEO;AACL4B,sBAAc,KAAKjB,QAAnB;AACA,aAAKkB,UAAL;AACA,aAAKlC,KAAL;AACD;AACF;;;;;;kBAtFkBhB,I;;;;;;;;;;;;ACPd,IAAMmD,gCAAY;AACvB,WAAS,KADc;AAEvB,WAAS;AAFc,CAAlB;;AAKA,IAAMC,kCAAa;AACxB,QAAM,GADkB;AAExB,QAAM,GAFkB;AAGxB,QAAM,GAHkB;AAIxB,QAAM;AAJkB,CAAnB;;AAOA,IAAMC,kCAAa;AACxB,OAAK,CAAC,GAAD,EAAM,GAAN,CADmB;AAExB,OAAK,CAAC,GAAD,EAAM,GAAN,CAFmB;AAGxB,OAAK,CAAC,GAAD,EAAM,GAAN,CAHmB;AAIxB,OAAK,CAAC,GAAD,EAAM,GAAN;AAJmB,CAAnB,C;;;;;;;;;ACZP;;;;;;AAEAjD,SAASqB,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAM6B,OAAO,mBAAS,EAAT,EAAa,EAAb,CAAb;AACAC,SAAOD,IAAP,GAAcA,IAAd;AACA9C,IAAE,QAAF,EAAYgD,EAAZ,CAAe,OAAf,EAAwB,YAAM;AAC5BF,SAAKG,KAAL;AACD,GAFD;AAGD,CAND,E;;;;;;;;;;;;;;;;;ICFqBC,K;AACnB,iBAAYC,MAAZ,EAAoB;AAAA;;AAAA;;AAClB,SAAKd,KAAL,GAAac,MAAb;AACA,SAAKjB,GAAL,GAAW,IAAIkB,GAAJ,EAAX;AACAD,WAAOb,OAAP,CAAe,iBAAS;AACtB,YAAKJ,GAAL,CAASmB,GAAT,CAAa9B,MAAMa,QAAN,EAAb;AACD,KAFD;AAGD;;;;+BAEUvB,I,EAAME,G,EAAK;AACpB,cAAQA,GAAR;AACE,aAAK,GAAL;AACE,iBAAO,CAACF,KAAK,CAAL,CAAD,EAAUA,KAAK,CAAL,IAAU,CAApB,CAAP;AACF,aAAK,GAAL;AACE,iBAAO,CAACA,KAAK,CAAL,CAAD,EAAUA,KAAK,CAAL,IAAU,CAApB,CAAP;AACF,aAAK,GAAL;AACE,iBAAO,CAACA,KAAK,CAAL,IAAU,CAAX,EAAcA,KAAK,CAAL,CAAd,CAAP;AACF,aAAK,GAAL;AACE,iBAAO,CAACA,KAAK,CAAL,IAAU,CAAX,EAAcA,KAAK,CAAL,CAAd,CAAP;AACF;AACE,gBAAM,oBAAN;AAVJ;AAYD;;;2BAEM;AACL,aAAO,KAAKwB,KAAL,CAAW,CAAX,CAAP;AACD;;;yBAEItB,G,EAAsB;AAAA,UAAjBuC,UAAiB,uEAAN,IAAM;;AACzB,UAAMzC,OAAO,KAAKwB,KAAL,CAAW,CAAX,CAAb;AACA,UAAMkB,UAAU,KAAKC,UAAL,CAAgB3C,IAAhB,EAAsBE,GAAtB,CAAhB;AACA,WAAKsB,KAAL,CAAWoB,OAAX,CAAmBF,OAAnB;AACA,WAAKrB,GAAL,CAASmB,GAAT,CAAaE,QAAQnB,QAAR,EAAb;AACA,UAAIkB,UAAJ,EAAgB;AACd,YAAMf,OAAO,KAAKF,KAAL,CAAWqB,GAAX,EAAb;AACA,YAAI,CAAC,KAAKxB,GAAL,CAASyB,MAAT,CAAgBpB,KAAKH,QAAL,EAAhB,CAAL,EAAuC;AACrC,gBAAM,gCAAN;AACD;AACD,eAAOG,IAAP;AACD;AACF;;;;;;kBAxCkBW,K","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d880da4abb7636002b53","import Snake from './snake.js';\nimport {\n  COLOR_MAP,\n  KEY_TO_DIR,\n  VALID_DIRS,\n} from './constants';\n\nexport default class Game {\n  constructor(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    const canvas = document.getElementById('canvas');\n    const width = parseInt($(canvas).css('width'));\n    const height = parseInt($(canvas).css('height'));\n    this.widthRatio = parseInt(width / columns);\n    this.heightRatio = parseInt(height / rows);\n    this.grid = canvas.getContext(\"2d\");\n    this.grid.scale(this.widthRatio, this.heightRatio);\n    this.reset();\n    this.startEventListner();\n  }\n\n  reset() {\n    this.snake = new Snake([this.getStartingCoord()]);\n    this.fillSquare(this.snake.head(), 'snake');\n    this.direction = 'n';\n  }\n\n  validDirection(dir) {\n    return VALID_DIRS[this.direction].includes(dir);\n  }\n\n  startEventListner() {\n    document.addEventListener('keydown', e => {\n      const dir = KEY_TO_DIR[e.which];\n      if (this.validDirection(dir)) {\n        this.direction = dir;\n      }\n    });\n  }\n\n  getStartingCoord() {\n    const x = parseInt(this.columns / 2);\n    const y = this.rows - 1;\n    return [x, y];\n  }\n\n  coordToCanvas(coord) {\n    return [coord[0], coord[1], 1, 1];\n  }\n\n  start() {\n    this.interval = setInterval(this.move.bind(this), 200);\n  }\n\n  fillSquare(coord, type) {\n    const color = COLOR_MAP[type];\n    if (!color) {\n      throw 'Invalid color!';\n    }\n    this.grid.fillStyle = color;\n    this.grid.fillRect(...this.coordToCanvas(coord));\n  }\n\n  validPos(pos) {\n    if (this.snake.set.has(pos.toString()) &&\n        pos.toString() !== this.snake.head().toString()) {\n      return false;\n    }\n    if (pos[0] < 0 || pos[0] >= this.columns || pos[1] < 0 || pos[1] >= this.rows) {\n      return false;\n    }\n    return true;\n  }\n\n  clearSnake() {\n    this.snake.queue.forEach(coord => {\n      this.fillSquare(coord, 'empty');\n    });\n  }\n\n  move() {\n    const tail = this.snake.move(this.direction);\n    if (tail) {\n      this.fillSquare(tail, 'empty');\n    }\n    if (this.validPos(this.snake.head())) {\n      this.fillSquare(this.snake.head(), 'snake');\n    } else {\n      clearInterval(this.interval);\n      this.clearSnake();\n      this.reset();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./game.js","export const COLOR_MAP = {\n  'snake': 'red',\n  'empty': 'white',\n}\n\nexport const KEY_TO_DIR = {\n  '37': 'w',\n  '38': 'n',\n  '39': 'e',\n  '40': 's',\n}\n\nexport const VALID_DIRS = {\n  'n': ['e', 'w'],\n  's': ['e', 'w'],\n  'e': ['n', 's'],\n  'w': ['n', 's'],\n}\n\n\n\n// WEBPACK FOOTER //\n// ./constants.js","import Game from './game';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const game = new Game(30, 30);\n  window.game = game;\n  $('#start').on('click', () => {\n    game.start();\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./entry.js","export default class Snake {\n  constructor(coords) {\n    this.queue = coords;\n    this.set = new Set;\n    coords.forEach(coord => {\n      this.set.add(coord.toString());\n    });\n  }\n\n  getNewHead(head, dir) {\n    switch (dir) {\n      case 'n':\n        return [head[0], head[1] - 1]\n      case 's':\n        return [head[0], head[1] + 1]\n      case 'e':\n        return [head[0] + 1, head[1]]\n      case 'w':\n        return [head[0] - 1, head[1]]\n      default:\n        throw 'Invalid direction!';\n    }\n  }\n\n  head() {\n    return this.queue[0];\n  }\n\n  move(dir, removeTail=true) {\n    const head = this.queue[0];\n    const newHead = this.getNewHead(head, dir);\n    this.queue.unshift(newHead);\n    this.set.add(newHead.toString());\n    if (removeTail) {\n      const tail = this.queue.pop();\n      if (!this.set.delete(tail.toString())) {\n        throw 'Oops! Queue doesn\\'t match set';\n      }\n      return tail;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./snake.js"],"sourceRoot":""}