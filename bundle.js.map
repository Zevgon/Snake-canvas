{"version":3,"sources":["webpack:///webpack/bootstrap 03d2b212a925999a1a0a","webpack:///./game.js","webpack:///./constants.js","webpack:///./entry.js","webpack:///./snake.js","webpack:///./grid.js"],"names":["Game","rows","columns","grid","document","getElementById","startEventListner","addEventListener","dir","e","which","changeDirection","interval","setInterval","handleMove","bind","moved","move","clearInterval","reset","COLOR_MAP","KEY_TO_DIR","VALID_DIRS","game","window","$","on","start","Snake","coords","queue","set","Set","forEach","add","coord","toString","head","removeTail","newHead","getNewHead","unshift","tail","pop","delete","Grid","cols","canvasEl","canvas","getContext","width","parseInt","css","height","widthRatio","heightRatio","scale","direction","snake","getStartingCoord","clearRect","fillSquare","newDir","validDirection","type","color","fillStyle","fillRect","coordToCanvas","pos","has","x","y","oldDir","includes","validPos","clearSnake"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 03d2b212a925999a1a0a","import Grid from './grid';\nimport { KEY_TO_DIR } from './constants';\n\nexport default class Game {\n  constructor(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    this.grid = new Grid(rows, columns, document.getElementById('canvas'));\n    this.startEventListner();\n  }\n\n  startEventListner() {\n    document.addEventListener('keydown', e => {\n      const dir = KEY_TO_DIR[e.which];\n      this.grid.changeDirection(dir);\n    });\n  }\n\n  start() {\n    this.interval = setInterval(this.handleMove.bind(this), 200);\n  }\n\n  handleMove() {\n    const moved = this.grid.move();\n    if (!moved) {\n      clearInterval(this.interval);\n      this.grid.reset();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./game.js","export const COLOR_MAP = {\n  'snake': 'red',\n  'empty': 'white',\n}\n\nexport const KEY_TO_DIR = {\n  '37': 'w',\n  '38': 'n',\n  '39': 'e',\n  '40': 's',\n}\n\nexport const VALID_DIRS = {\n  'n': ['e', 'w'],\n  's': ['e', 'w'],\n  'e': ['n', 's'],\n  'w': ['n', 's'],\n}\n\n\n\n// WEBPACK FOOTER //\n// ./constants.js","import Game from './game';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const game = new Game(30, 30);\n  window.game = game;\n  $('#start').on('click', () => {\n    game.start();\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./entry.js","export default class Snake {\n  constructor(coords) {\n    this.queue = coords;\n    this.set = new Set;\n    coords.forEach(coord => {\n      this.set.add(coord.toString());\n    });\n  }\n\n  getNewHead(head, dir) {\n    switch (dir) {\n      case 'n':\n        return [head[0], head[1] - 1]\n      case 's':\n        return [head[0], head[1] + 1]\n      case 'e':\n        return [head[0] + 1, head[1]]\n      case 'w':\n        return [head[0] - 1, head[1]]\n      default:\n        throw 'Invalid direction!';\n    }\n  }\n\n  head() {\n    return this.queue[0];\n  }\n\n  move(dir, removeTail=true) {\n    const head = this.queue[0];\n    const newHead = this.getNewHead(head, dir);\n    this.queue.unshift(newHead);\n    this.set.add(newHead.toString());\n    if (removeTail) {\n      const tail = this.queue.pop();\n      if (!this.set.delete(tail.toString())) {\n        throw 'Oops! Queue doesn\\'t match set';\n      }\n      return tail;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./snake.js","import Snake from './snake';\nimport {\n  VALID_DIRS,\n  COLOR_MAP,\n} from './constants';\n\nexport default class Grid {\n  constructor(rows, cols, canvasEl) {\n    this.rows = rows;\n    this.cols = cols;\n    this.canvas = canvasEl.getContext('2d');\n    this.width = parseInt($(canvas).css('width'));\n    this.height = parseInt($(canvas).css('height'));\n    this.widthRatio = parseInt(this.width / cols);\n    this.heightRatio = parseInt(this.height / rows);\n    this.grid = canvas.getContext(\"2d\");\n    this.grid.scale(this.widthRatio, this.heightRatio);\n    this.direction = 'n';\n    this.reset();\n  }\n\n  reset() {\n    this.snake = new Snake([this.getStartingCoord()]);\n    this.grid.clearRect(0, 0, this.width, this.height);\n    this.direction = 'n';\n    this.fillSquare(this.snake.head(), 'snake');\n  }\n\n  changeDirection(newDir) {\n    if (this.validDirection(this.direction, newDir)) {\n      this.direction = newDir;\n    }\n  }\n\n  fillSquare(coord, type) {\n    const color = COLOR_MAP[type];\n    if (!color) {\n      throw 'Invalid color!';\n    }\n    this.grid.fillStyle = color;\n    this.grid.fillRect(...this.coordToCanvas(coord));\n  }\n\n  validPos(pos) {\n    if (this.snake.set.has(pos.toString()) &&\n        pos.toString() !== this.snake.head().toString()) {\n      return false;\n    }\n    if (pos[0] < 0 || pos[0] >= this.columns || pos[1] < 0 || pos[1] >= this.rows) {\n      return false;\n    }\n    return true;\n  }\n\n  clearSnake() {\n    this.snake.queue.forEach(coord => {\n      this.fillSquare(coord, 'empty');\n    });\n  }\n\n  getStartingCoord() {\n    const x = parseInt(this.cols / 2);\n    const y = this.rows - 1;\n    return [x, y];\n  }\n\n  coordToCanvas(coord) {\n    return [coord[0], coord[1], 1, 1];\n  }\n\n  validDirection(oldDir, newDir) {\n    return VALID_DIRS[oldDir].includes(newDir);\n  }\n\n  move() {\n    const tail = this.snake.move(this.direction);\n    if (tail) {\n      this.fillSquare(tail, 'empty');\n    }\n    if (this.validPos(this.snake.head())) {\n      this.fillSquare(this.snake.head(), 'snake');\n      return true;\n    } else {\n      this.clearSnake();\n      this.reset();\n      return false;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./grid.js"],"sourceRoot":""}