{"version":3,"sources":["webpack:///webpack/bootstrap 8aa940f5d413b0bf82c6","webpack:///./entry.js","webpack:///./game.js","webpack:///./snake.js"],"names":["document","addEventListener","game","window","$","on","start","COLOR_MAP","KEY_TO_DIR","VALID_DIRS","Game","rows","columns","canvas","getElementById","width","parseInt","css","height","widthRatio","heightRatio","grid","getContext","scale","snake","getStartingCoord","fillSquare","head","direction","startEventListner","dir","includes","e","which","validDirection","x","y","coord","interval","setInterval","move","bind","type","color","fillStyle","fillRect","coordToCanvas","tail","Snake","coords","queue","set","Set","forEach","add","toString","removeTail","newHead","getNewHead","unshift","pop","delete"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8aa940f5d413b0bf82c6","import Game from './game';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const game = new Game(30, 30);\n  window.game = game;\n  $('#start').on('click', () => {\n    game.start();\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./entry.js","import Snake from './snake.js';\n\nconst COLOR_MAP = {\n  'snake': 'red',\n  'empty': 'white',\n}\n\nconst KEY_TO_DIR = {\n  '37': 'w',\n  '38': 'n',\n  '39': 'e',\n  '40': 's',\n}\n\nconst VALID_DIRS = {\n  'n': ['e', 'w'],\n  's': ['e', 'w'],\n  'e': ['n', 's'],\n  'w': ['n', 's'],\n}\n\nexport default class Game {\n  constructor(rows, columns) {\n    this.rows = rows;\n    this.columns = columns;\n    const canvas = document.getElementById('canvas');\n    const width = parseInt($(canvas).css('width'));\n    const height = parseInt($(canvas).css('height'));\n    this.widthRatio = parseInt(width / columns);\n    this.heightRatio = parseInt(height / rows);\n    this.grid = canvas.getContext(\"2d\");\n    this.grid.scale(this.widthRatio, this.heightRatio);\n    this.snake = new Snake([this.getStartingCoord()]);\n    this.fillSquare(this.snake.head(), 'snake');\n    this.direction = 'n';\n    this.startEventListner();\n  }\n\n  validDirection(dir) {\n    return VALID_DIRS[this.direction].includes(dir);\n  }\n\n  startEventListner() {\n    document.addEventListener('keydown', e => {\n      const dir = KEY_TO_DIR[e.which];\n      if (this.validDirection(dir)) {\n        this.direction = dir;\n      }\n    });\n  }\n\n  getStartingCoord() {\n    const x = parseInt(this.columns / 2);\n    const y = this.rows - 1;\n    return [x, y];\n  }\n\n  coordToCanvas(coord) {\n    return [coord[0], coord[1], 1, 1];\n  }\n\n  start() {\n    this.interval = setInterval(this.move.bind(this), 200);\n  }\n\n  fillSquare(coord, type) {\n    const color = COLOR_MAP[type];\n    if (!color) {\n      throw 'Invalid color!';\n    }\n    this.grid.fillStyle = color;\n    this.grid.fillRect(...this.coordToCanvas(coord));\n  }\n\n  move() {\n    const tail = this.snake.move(this.direction);\n    if (tail) {\n      this.fillSquare(tail, 'empty');\n    }\n    this.fillSquare(this.snake.head(), 'snake');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./game.js","export default class Snake {\n  constructor(coords) {\n    this.queue = coords;\n    this.set = new Set;\n    coords.forEach(coord => {\n      this.set.add(coord.toString());\n    });\n  }\n\n  getNewHead(head, dir) {\n    switch (dir) {\n      case 'n':\n        return [head[0], head[1] - 1]\n      case 's':\n        return [head[0], head[1] + 1]\n      case 'e':\n        return [head[0] + 1, head[1]]\n      case 'w':\n        return [head[0] - 1, head[1]]\n      default:\n        throw 'Invalid direction!';\n    }\n  }\n\n  head() {\n    return this.queue[0];\n  }\n\n  move(dir, removeTail=true) {\n    const head = this.queue[0];\n    const newHead = this.getNewHead(head, dir);\n    this.queue.unshift(newHead);\n    this.set.add(newHead.toString());\n    if (removeTail) {\n      const tail = this.queue.pop();\n      if (!this.set.delete(tail.toString())) {\n        throw 'Oops! Queue doesn\\'t match set';\n      }\n      return tail;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./snake.js"],"sourceRoot":""}